(function(n){function t(t){for(var s,c,o=t[0],r=t[1],l=t[2],u=0,d=[];u<o.length;u++)c=o[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var n,t=0;t<i.length;t++){for(var e=i[t],s=!0,o=1;o<e.length;o++){var r=e[o];0!==a[r]&&(s=!1)}s&&(i.splice(t--,1),n=c(c.s=e[0]))}return n}var s={},a={app:0},i=[];function c(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=n,c.c=s,c.d=function(n,t,e){c.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},c.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,t){if(1&t&&(n=c(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var s in n)c.d(e,s,function(t){return n[t]}.bind(null,s));return e},c.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return c.d(t,"a",t),t},c.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=r;i.push([0,"chunk-vendors"]),e()})({0:function(n,t,e){n.exports=e("56d7")},"0126":function(n,t,e){},"0669":function(n,t,e){n.exports=e.p+"myBlog/img/circles.bd86138f.svg"},"07e8":function(n,t,e){"use strict";e("4902")},"09c0":function(n,t,e){"use strict";e("a208")},"0ea7":function(n,t,e){"use strict";e("afda")},1096:function(n,t,e){"use strict";e("b920")},1104:function(n,t,e){"use strict";e("341f")},"14cd":function(n,t,e){"use strict";e("8377")},1855:function(n,t,e){"use strict";e("85c7")},"18f6":function(n,t,e){"use strict";e("5819")},"1b3c":function(n,t,e){"use strict";e("8896")},"341f":function(n,t,e){},"3efc":function(n,t,e){},"3f5d":function(n,t,e){"use strict";e("3efc")},"45a1":function(n,t,e){"use strict";e("46b3")},"46b3":function(n,t,e){},4902:function(n,t,e){},"4d13":function(n,t,e){"use strict";e("f8a7")},"4de2":function(n,t,e){"use strict";e("e269")},"553c":function(n,t,e){"use strict";e("0126")},"56d7":function(n,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{attrs:{id:"app"}},[e("Layout",{scopedSlots:n._u([{key:"left",fn:function(){return[e("div",{staticClass:"left"},[e("Aside")],1)]},proxy:!0},{key:"default",fn:function(){return[e("div",{staticClass:"main"},[e("RouterView")],1)]},proxy:!0}])})],1)},i=[],c=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"layout-container"},[e("div",{staticClass:"left"},[n._t("left")],2),e("div",{staticClass:"main"},[n._t("default")],2),e("div",{staticClass:"right"},[n._t("right")],2)])},o=[],r={name:"index"},l=r,p=(e("4de2"),e("2877")),u=Object(p["a"])(l,c,o,!1,null,"783dbb15",null),d=u.exports,m=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"aside-container"},[e("Avater",{directives:[{name:"show",rawName:"v-show",value:n.data,expression:"data"}],attrs:{size:150,url:n.data.avatar?n.data.avatar:""}}),e("h1",{directives:[{name:"show",rawName:"v-show",value:n.data,expression:"data"}]},[n._v(n._s(n.data.siteTile?n.data.siteTile:" "))]),e("Menu",{attrs:{list:n.items}}),e("Content",{attrs:{lists:n.list}}),e("div",{staticClass:"beian"},[n._v(n._s(n.data.icp))])],1)},h=[],g=e("5530"),f=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("img",{staticClass:"avatar-container",style:{width:n.size+"px",height:n.size+"px"},attrs:{src:n.url,alt:""}})},v=[],b=(e("a9e3"),{name:"index",props:{url:{type:String,required:!0},size:{type:Number,default:100}}}),C=b,w=(e("553c"),Object(p["a"])(C,f,v,!1,null,"64ce23ea",null)),y=w.exports,x=(e("e996"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"menu-container"},n._l(n.list,(function(t,s){return e("RouterLink",{key:s,attrs:{exact:t.ex,to:{name:t.name},"active-class":"selected","exact-active-class":""}},[e("Icon",{staticClass:"icon",attrs:{type:t.icon}}),e("span",[n._v(n._s(t.text))])],1)})),1)}),L=[],_=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("i",{staticClass:"iconfont icon-container",class:n.fullClass})},k=[],j=(e("b64b"),{ww:"icon-aliwangwang",code:"icon-display-code",serv:"icon-headset-fill",angleDown:"icon-angle-down",angleUp:"icon-angle-up",info:"icon-info-circle",warn:"icon-exclamation-circle",close:"icon-times",user:"icon-user-circle",home:"icon-home",email:"icon-mail",right:"icon-check-circle",error:"icon-times-circle"}),O=(Object.keys(j),{name:"index",props:{type:{type:String,required:!0}},computed:{fullClass:function(){return j[this.type]}}}),E=O,A=(e("57e6"),Object(p["a"])(E,_,k,!1,null,"943944ce",null)),$=A.exports,T={name:"index",components:{Icon:$},props:{list:{type:Array}}},D=T,B=(e("c522"),Object(p["a"])(D,x,L,!1,null,"3bf81cf1",null)),N=B.exports,S=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"contact-container"},[e("ul",n._l(n.lists,(function(t,s){return e("li",{key:s,on:{mouseover:function(t){return n.handle(s)},mouseout:function(t){return n.handle()}}},[e("a",{attrs:{href:t.link}},[e("div",{staticClass:"icon"},[e("Icon",{attrs:{type:t.icon}})],1),e("span",[n._v(n._s(t.content))]),t.show?e("div",{staticClass:"show",style:{transform:n.diaoyong(n.flg===s)}},[e("img",{attrs:{src:t.url,alt:""}})]):n._e()])])})),0)])},q=[],R={name:"index",components:{Icon:$},props:{lists:{type:Array}},data:function(){return{flg:{type:Number}}},methods:{handle:function(n){void 0===n&&(n=NaN),this.flg!==n&&(this.flg=n)},diaoyong:function(n){return"scaleY("+ +n+")"}}},M=R,H=(e("98c1"),Object(p["a"])(M,S,q,!1,null,"4c3a1b6d",null)),I=H.exports,P=e("2f62"),z={name:"index",components:{Avater:y,Menu:N,Content:I},computed:Object(g["a"])(Object(g["a"])({},Object(P["b"])("Globel",["data"])),{},{list:function(){return[{link:"/",icon:"ww",content:this.data.qq},{link:"mailto:".concat(this.data.mail?this.data.mail:"/"),icon:"email",content:this.data.mail},{link:"/",icon:"ww",content:this.data.weixin},{link:"/",icon:"serv",content:this.data.gitHubName},{link:"/",icon:"ww",content:this.data.qq,show:!0,url:this.data.qqQ}]}}),data:function(){return{items:[{icon:"home",name:"Home",text:"首页",ex:!0},{icon:"home",name:"Blog",text:"博客Blog",ex:!1},{icon:"home",name:"Message",text:"留言",ex:!0},{icon:"home",name:"About",text:"关于我",ex:!0}]}},created:function(){this.$store.dispatch("Globel/asyncsetData")}},W=z,G=(e("45a1"),Object(p["a"])(W,m,h,!1,null,"0cd86ad4",null)),F=G.exports,Y={name:"App",components:{Layout:d,Aside:F}},J=Y,U=(e("fe64"),Object(p["a"])(J,a,i,!1,null,"1088f52c",null)),K=U.exports,Q=(e("b0c0"),e("8c4f")),X=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],ref:"box",staticClass:"home-container"},[e("ul",{staticClass:"img-container",style:{marginTop:n.marginTop+"px"},on:{transitionend:function(t){return n.setMoving(t)},wheel:n.wheelHandle}},n._l(n.data,(function(t){return e("li",{key:t.id},[e("CarouselItem",{attrs:{cur:n.index,list:t}})],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:n.index<n.count-1,expression:"index < count - 1"}],staticClass:"icon up",on:{click:function(t){return n.setIndex(n.index+1)}}},[e("Icon",{attrs:{type:"angleDown"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:n.index>0,expression:"index > 0"}],staticClass:"icon down",on:{click:function(t){return n.setIndex(n.index-1)}}},[e("Icon",{attrs:{type:"angleUp"}})],1),e("ul",{staticClass:"indicator"},n._l(n.data,(function(t,s){return e("li",{key:t.id,class:{active:s===n.index},on:{click:function(t){return n.setIndex(s)}}})})),0)])},V=[],Z=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{ref:"carousel",staticClass:"carousel-container",on:{mouseleave:n.mouseoutHandle,mousemove:n.MouseHandle}},[e("div",{ref:"carouselImg",staticClass:"carousel-img",style:n.imagePosition},[e("ImageLoader",{attrs:{placeholder:n.list.midImg,src:n.list.bigImg},on:{onload:n.showChart}})],1),e("div",{staticClass:"context"},[e("span",{ref:"title",staticClass:"h1"},[n._v(n._s(n.list.title))]),e("span",{ref:"desc",staticClass:"desc"},[n._v(n._s(n.list.description))])])])},nn=[],tn=(e("99af"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"imageLoader-container"},[n.shanchu?n._e():e("img",{staticClass:"placeHolder",attrs:{src:n.placeholder,alt:""}}),e("img",{staticClass:"image",style:{opacity:n.loadedOpacity,transition:n.duration+"ms"},attrs:{src:n.src,alt:""},on:{load:n.handle}})])}),en=[],sn={name:"index",props:{src:{type:String,required:!0},placeholder:{type:String,required:!0},duration:{type:Number,default:500}},data:function(){return{loaded:!1,shanchu:!1}},computed:{loadedOpacity:function(){return this.loaded?1:0}},methods:{handle:function(){var n=this;this.loaded=!0,setTimeout((function(){n.shanchu=!0,n.$emit("load")}),this.duration)}}},an=sn,cn=(e("18f6"),Object(p["a"])(an,tn,en,!1,null,"2a8d7bc5",null)),on=cn.exports,rn={name:"index",components:{ImageLoader:on},props:{list:[],cur:{default:0}},data:function(){return{titleWidth:0,descWidth:0,Contain:null,Imgsize:null,Mx:0,My:0,flg:!1}},computed:{imagePosition:function(){if(this.Contain&&this.Imgsize){var n=this.Contain.w-this.Imgsize.w,t=this.Contain.h-this.Imgsize.h,e=Math.floor(n/this.Contain.w*this.Mx),s=Math.floor(t/this.Contain.h*this.My);return{transform:"translate(".concat(e,"px,").concat(s,"px)")}}}},mounted:function(){var n=this.$refs;this.titleWidth=n.title.clientWidth,this.descWidth=n.desc.clientWidth,this.$refs.title.style.transition="1.5s 1s",this.$refs.desc.style.transition="1.5s 2s",this.showChart(),this.resize(),this.mouseoutHandle(),window.addEventListener("resize",this.resize)},methods:{showChart:function(){this.cur===this.list.id-1&&(this.$refs.title.style.opacity="1",this.$refs.title.style.width="0px",this.$refs.title.clientWidth,this.$refs.title.style.width=this.titleWidth+"px",this.$refs.desc.style.opacity="1",this.$refs.desc.style.width="0px",this.$refs.desc.clientWidth,this.$refs.desc.style.width=this.descWidth+"px",this.flg=!1)},resize:function(){var n=this.$refs;this.Contain={},this.Imgsize={},this.Contain.w=n.carousel.clientWidth,this.Contain.h=n.carousel.clientHeight,this.Imgsize.w=n.carouselImg.clientWidth,this.Imgsize.h=n.carouselImg.clientHeight},MouseHandle:function(n){var t=this.$refs.carousel.getBoundingClientRect();this.Contain.left=t.left,this.Contain.top=t.top,this.Mx=Math.floor(n.clientX-this.Contain.left),this.My=Math.floor(n.clientY-this.Contain.top)},mouseoutHandle:function(){this.Mx=this.$refs.carousel.clientWidth/2,this.My=this.$refs.carousel.clientHeight/2}},destroyed:function(){window.removeEventListener("resize",this.resize)},watch:{cur:function(){this.cur!==this.list.id-1||this.flg||(this.flg=!0,this.showChart())}}},ln=rn,pn=(e("1855"),Object(p["a"])(ln,Z,nn,!1,null,"291366ef",null)),un=pn.exports,dn={name:"index",components:{Icon:$,CarouselItem:un},data:function(){return{index:0,conHeight:0,moving:!1}},created:function(){this.$store.dispatch("Banner/Setdata")},computed:Object(g["a"])({count:function(){return this.data.length},marginTop:function(){return-this.index*this.conHeight}},Object(P["b"])("Banner",["isLoading","data"])),mounted:function(){this.conHeight=this.$refs.box.clientHeight,window.addEventListener("resize",this.changHeight)},methods:{setIndex:function(n){this.index=n},setMoving:function(n){"UL"===n.target.nodeName&&(this.moving=!1)},changHeight:function(){this.conHeight=this.$refs.box.clientHeight},wheelHandle:function(n){!0!==this.moving&&(100===n.deltaY&&this.index<this.count-1&&(this.moving=!0,this.index++),-100===n.deltaY&&this.index>0&&(this.moving=!0,this.index--))}},destroyed:function(){window.removeEventListener("resize",this.changHeight)}},mn=dn,hn=(e("d2d9"),Object(p["a"])(mn,X,V,!1,null,"f5dbc4ac",null)),gn=hn.exports,fn=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"blog-container"},[e("Layout",{scopedSlots:n._u([{key:"right",fn:function(){return[e("BlogCategory")]},proxy:!0}])},[[e("BlogList")]],2)],1)},vn=[],bn=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],ref:"container",staticClass:"blogList-container"},[e("div",{staticClass:"blogs"},n._l(n.data.rows,(function(t){return e("div",{key:t.id,staticClass:"blogList"},[e("div",{staticClass:"img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumb,expression:"item.thumb"}],attrs:{alt:""}})]),e("div",{staticClass:"content"},[e("RouterLink",{attrs:{to:{name:"Detail",params:{id:t.id}}}},[e("h2",[n._v(n._s(t.title))])]),e("p",{staticClass:"readnumber"},[e("RouterLink",{attrs:{to:{name:"CateBlog",params:{categoryId:t.category.id}}}},[e("span",[n._v(n._s(t.category.name))])]),e("span",[n._v(n._s(t.scanNumber))]),e("span",[n._v(n._s(t.commentNumber))]),e("span",[n._v(n._s(n.Time(t.createDate)))])],1),e("p",{staticClass:"description"},[n._v(" "+n._s(t.description)+" ")])],1)])})),0),e("Pager",{attrs:{current:n.curinfo.p,total:n.data.total},on:{pageChang:n.handle}}),e("GoTop")],1)},Cn=[],wn=e("1da1"),yn=(e("96cf"),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{data:function(){return{isLoading:!0,data:n,count:0}},created:function(){var n=this;return Object(wn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.fetchData();case 2:n.data=t.sent,n.count=n.data.length,n.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}}}),xn=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.pageN>1?e("div",{staticClass:"pager-container"},[e("a",{class:{disable:1===n.current},on:{click:function(t){return n.chuandi(1)}}},[n._v("first")]),e("a",{class:{disable:1===n.current},on:{click:function(t){return n.chuandi(n.current-1)}}},[n._v("prev")]),n._l(n.numbers,(function(t,s){return e("a",{key:s,class:{active:n.current===t},on:{click:function(e){return n.chuandi(t)}}},[n._v(n._s(t))])})),e("a",{class:{disable:n.current===n.pageN},on:{click:function(t){return n.chuandi(n.current+1)}}},[n._v("next")]),e("a",{class:{disable:n.current===n.pageN},on:{click:function(t){return n.chuandi(n.pageN)}}},[n._v("last")])],2):n._e()},Ln=[],_n={name:"Pager",props:{current:{type:Number,default:1},total:{type:Number,default:0},limit:{type:Number,default:10},visibleNumber:{type:Number,default:10}},computed:{pageN:function(){return Math.ceil(this.total/this.limit)},mn:function(){return Math.floor(this.visibleNumber/2)},rang:function(){var n=[1,this.visibleNumber];return this.pageN>this.visibleNumber&&(this.current>this.mn&&(n[0]=this.current-this.mn,n[1]=this.current+this.mn-1),this.current>this.pageN-this.mn&&(n[0]=this.pageN-this.visibleNumber+1,n[1]=this.pageN)),n},numbers:function(){for(var n=[],t=this.rang[0];t<=this.rang[1];t++)n.push(t);return n}},methods:{chuandi:function(n){n!==this.current&&(n>this.pageN&&(n=this.pageN),n<1&&(n=1),this.$emit("pageChang",n))}}},kn=_n,jn=(e("1b3c"),Object(p["a"])(kn,xn,Ln,!1,null,"1db7fcbc",null)),On=jn.exports,En=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:n.isShow,expression:"isShow"}],staticClass:"goTop-container",on:{click:n.Chandle}},[n._v(" goTop ")])},An=[],$n={name:"index",data:function(){return{isShow:!1,container:""}},methods:{gotoTop:function(n){this.container=n.target,this.isShow=this.container.scrollTop>200},Chandle:function(){this.container.scrollTop=0}},mounted:function(){this.bus.$on("mainScroll",this.gotoTop),this.bus.$on("BlogList",this.gotoTop)},destroyed:function(){this.bus.$off("mainScroll",this.gotoTop),this.bus.$off("BlogList",this.gotoTop)}},Tn=$n,Dn=(e("a74d"),Object(p["a"])(Tn,En,An,!1,null,"98912568",null)),Bn=Dn.exports,Nn=e("bc3a"),Sn=e.n(Nn),qn=function(n,t){var e=new s["a"]({render:function(e){return e(n,{props:t})}});return e.$mount(),e.$el},Rn=e("996b"),Mn=e.n(Rn),Hn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.container||document.body,e=n.type||"info",s=n.duration||2e3,a=n.context||"",i=document.createElement("div"),c=qn($,{type:e});i.className="".concat(Mn.a.message," ").concat(Mn.a["message-"+e]),i.innerHTML="".concat(c.outerHTML,"<span>").concat(a,"</span>"),"static"===getComputedStyle(t).position&&n.container&&(t.style.position="relative"),t.appendChild(i),i.clientHeight,i.style.transform="translate(-50%,-50%)",i.style.opacity=1,setTimeout((function(){i.style.opacity=0,i.style.transform="translate(-50%,-50%) translateY(-25px)",i.addEventListener("transitionend",(function(){i.remove(),n.callback&&n.callback.call(this)}),{once:!0})}),s)},In=Sn.a.create();In.interceptors.response.use((function(n){return 0!==n.data.code?(Hn({context:n.data.msg,type:"error",duration:1500}),null):n.data.data}));var Pn=In;function zn(){return Wn.apply(this,arguments)}function Wn(){return Wn=Object(wn["a"])(regeneratorRuntime.mark((function n(){var t,e,s,a=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e=a.length>1&&void 0!==a[1]?a[1]:10,s=a.length>2&&void 0!==a[2]?a[2]:-1,n.next=5,Pn.get("/api/blog",{params:{page:t,limit:e,categoryid:s}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)}))),Wn.apply(this,arguments)}function Gn(){return Fn.apply(this,arguments)}function Fn(){return Fn=Object(wn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Pn.get("/api/blogtype");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),Fn.apply(this,arguments)}function Yn(){return Jn.apply(this,arguments)}function Jn(){return Jn=Object(wn["a"])(regeneratorRuntime.mark((function n(){var t,e=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.length>0&&void 0!==e[0]?e[0]:1,n.next=3,Pn.get("/api/blog/".concat(t));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)}))),Jn.apply(this,arguments)}function Un(n){return Kn.apply(this,arguments)}function Kn(){return Kn=Object(wn["a"])(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Pn.post("/api/comment",t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),Kn.apply(this,arguments)}function Qn(n){return Xn.apply(this,arguments)}function Xn(){return Xn=Object(wn["a"])(regeneratorRuntime.mark((function n(t){var e,s,a=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=a.length>1&&void 0!==a[1]?a[1]:1,s=a.length>2&&void 0!==a[2]?a[2]:10,n.next=4,Pn.get("/api/comment",{params:{blogid:t,page:e,limit:s}});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)}))),Xn.apply(this,arguments)}e("fb6a");function Vn(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=new Date(+n),s="";return t&&(s=" "+Zn(e.getHours())+":"+Zn(e.getMinutes())+":"+Zn(e.getSeconds())),e.getFullYear()+"-"+Zn(e.getMonth()+1)+"-"+Zn(e.getDate())+s}function Zn(n){return("0"+n).slice(-2)}var nt={name:"BlogList",components:{Pager:On,GoTop:Bn},mixins:[yn([])],methods:{Time:Vn,fetchData:function(){var n=this;return Object(wn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,zn(n.curinfo.p,n.limit,n.curinfo.cateId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},handle:function(n){var t=this.$route.params.categoryId;t?this.$router.push({name:"CateBlog",params:{categoryId:t},query:{page:+n}}):this.$router.push({name:"Blog",query:{page:+n}})},mainTop:function(n){this.bus.$emit("BlogList",n)}},computed:{curinfo:function(){return{cateId:+this.$route.params.categoryId||-1,limit:this.data.rows?this.data.rows.length:10,p:+this.$route.query.page||1}}},watch:{"$route.query":function(){var n=Object(wn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return this.$refs.container.scrollTop=0,this.isLoading=!0,n.next=4,this.fetchData();case 4:this.data=n.sent,this.isLoading=!1;case 6:case"end":return n.stop()}}),n,this)})));function t(){return n.apply(this,arguments)}return t}()},mounted:function(){this.$refs.container.addEventListener("scroll",this.mainTop)},beforeDestroy:function(){this.$refs.container.removeEventListener("scroll",this.mainTop)}},tt=nt,et=(e("db49"),Object(p["a"])(tt,bn,Cn,!1,null,"f1790300",null)),st=et.exports,at=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],staticClass:"blogCategory-container"},[e("h2",[n._v("文章列表")]),e("List",{attrs:{list:n.list},on:{select:n.selectHandle}})],1)},it=[],ct=e("2909"),ot=(e("d3b7"),e("159b"),e("d81d"),function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"list-container"},[e("ul",{staticClass:"lists-item"},n._l(n.list,(function(t,s){return e("li",{key:s},[e("div",{class:{active:t.isSelect},on:{click:function(e){return n.handleClick(t)}}},[n._v(n._s(t.name)+" "),t.articleCount?e("span",[n._v(n._s(t.articleCount))]):n._e()]),t.children?e("Lists",{attrs:{list:t.children},on:{select:n.handleClick}}):n._e()],1)})),0)])}),rt=[],lt={name:"Lists",props:{list:{type:Array}},methods:{handleClick:function(n){n.isSelect||this.$emit("select",n)}}},pt=lt,ut=(e("3f5d"),Object(p["a"])(pt,ot,rt,!1,null,"6b18bc02",null)),dt=ut.exports,mt={name:"BlogCategory",components:{List:dt},mixins:[yn([])],computed:{categoryid:function(){return this.$route.params.categoryId||-1},list:function(){var n=this,t=0;this.data.forEach((function(n){return t+=n.articleCount}));var e=[{name:"全部",articleCount:t,id:-1}].concat(Object(ct["a"])(this.data));return e.map((function(t){return t.isSelect=t.id===n.categoryid})),e}},methods:{fetchData:function(){return Object(wn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Gn();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},selectHandle:function(n){this.$router.push({name:"CateBlog",params:{categoryId:n.id}})}}},ht=mt,gt=(e("07e8"),Object(p["a"])(ht,at,it,!1,null,"0d63be4c",null)),ft=gt.exports,vt={name:"Blog",components:{Layout:d,BlogList:st,BlogCategory:ft}},bt=vt,Ct=(e("1096"),Object(p["a"])(bt,fn,vn,!1,null,"c3ce4bd2",null)),wt=Ct.exports,yt=function(){var n=this,t=n.$createElement;n._self._c;return n._m(0)},xt=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"about-container"},[e("h1",[n._v("关于我")])])}],Lt={name:"index"},_t=Lt,kt=(e("4d13"),Object(p["a"])(_t,yt,xt,!1,null,"3ec65e83",null)),jt=kt.exports,Ot=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],staticClass:"detail-container"},[e("Layout",{scopedSlots:n._u([{key:"right",fn:function(){return[e("Toc",{attrs:{items:n.data.toc}})]},proxy:!0}])},[[e("div",{ref:"mainbox",staticClass:"detail"},[n.data?e("Detail",{ref:"details",attrs:{list:n.data}}):n._e(),n.isLoading?n._e():e("Comment")],1)]],2),e("GoTop")],1)},Et=[],At=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.list.category?e("div",{staticClass:"blogDetail-container"},[e("h1",[n._v(n._s(n.list.title))]),e("div",{staticClass:"aside"},[e("RouterLink",{attrs:{to:{name:"CateBlog",params:{categoryId:n.list.category.id}}}},[e("span",[n._v(n._s(n.cataName))])]),e("span",[n._v("创建时间:"+n._s(n.Time(n.list.createDate)))]),e("span",[n._v("阅读:"+n._s(n.list.scanNumber))]),e("span",{on:{click:n.hashHandle}},[n._v("评论:"+n._s(n.list.commentNumber))])],1),e("div",{domProps:{innerHTML:n._s(n.list.htmlContent)}})]):n._e()},$t=[],Tt={name:"BlogDetail",props:{list:[]},methods:{Time:Vn,hashHandle:function(){window.location.hash="comment"}},computed:{cataName:function(){return this.list.category?this.list.category.name:""}}},Dt=Tt,Bt=(e("ec55"),Object(p["a"])(Dt,At,$t,!1,null,"5e2c90a2",null)),Nt=Bt.exports,St=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],staticClass:"blogComment-container"},[e("BlogC",{attrs:{list:n.data},on:{submit:n.handleSubmit}})],1)},qt=[],Rt=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"blog-comment-container"},[e("formBlog",n._g({},n.$listeners)),e("BlogComment",{attrs:{list:n.list}})],1)},Mt=[],Ht=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{ref:"from",staticClass:"formblog-container",attrs:{id:"comment"}},[e("div",{staticClass:"nickName"},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.info.nickName,expression:"info.nickName"}],attrs:{placeholder:"用户昵称",type:"text"},domProps:{value:n.info.nickName},on:{input:function(t){t.target.composing||n.$set(n.info,"nickName",t.target.value)}}}),e("span",{staticClass:"info-chart"},[n._v(n._s(n.info.nickName.length)+"/10")])]),e("div",{staticClass:"info-nickName"},[n._v(n._s(n.error.nickName))]),e("div",{staticClass:"message"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.info.message,expression:"info.message"}],attrs:{id:"",name:""},domProps:{value:n.info.message},on:{input:function(t){t.target.composing||n.$set(n.info,"message",t.target.value)}}}),e("span",{staticClass:"info-chart"},[n._v(n._s(n.info.message.length)+"/300")])]),e("div",{staticClass:"info-nickName"},[n._v(n._s(n.error.message))]),e("div",{staticClass:"button"},[e("button",{class:{disable:n.isSubmit},on:{click:n.handleClick}},[n._v(n._s(n.isSubmit?"提交中":"评论"))])])])},It=[],Pt={name:"formblog",data:function(){return{info:{nickName:"",message:""},error:{nickName:"",message:""},isSubmit:!1}},methods:{handleClick:function(){var n=this;this.isSubmit||(this.error.nickName=""===this.info.nickName?"请输入昵称!":"",this.error.message=""===this.info.message?"请输入昵称!":"",""!==this.info.nickName&&""!==this.info.message&&(this.isSubmit=!0,this.$emit("submit",{info:this.info,callback:function(t){n.showMessage({container:n.$refs.from,type:"success",context:t,callback:function(){n.info.nickName="",n.info.message="",n.isSubmit=!1}})}})))}}},zt=Pt,Wt=(e("81e0"),Object(p["a"])(zt,Ht,It,!1,null,"797a7792",null)),Gt=Wt.exports,Ft=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"blogComment-container"},[e("h2",[n._v("评论列表 ("+n._s(n.list.total)+")")]),e("div",{staticClass:"Comment-list"},n._l(n.list.rows,(function(t){return e("div",{key:t.id,staticClass:"lists"},[e("div",{staticClass:"avtar"},[e("img",{attrs:{src:t.avatar,alt:""}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"top"},[e("span",{staticClass:"name"},[n._v(n._s(t.nickname))]),e("span",{staticClass:"times"},[n._v(n._s(n.Time(t.createDate,!0)))])]),e("div",{staticClass:"main"},[n._v(n._s(t.content))])])])})),0)])},Yt=[],Jt={name:"blogComment",props:{list:{type:Object,default:function(){}}},methods:{Time:Vn}},Ut=Jt,Kt=(e("0ea7"),Object(p["a"])(Ut,Ft,Yt,!1,null,"69991840",null)),Qt=Kt.exports,Xt={name:"index",components:{formBlog:Gt,BlogComment:Qt},props:{list:{type:Object,default:function(){}}}},Vt=Xt,Zt=(e("845e"),Object(p["a"])(Vt,Rt,Mt,!1,null,"18e596e6",null)),ne=Zt.exports,te={name:"BlogComment",mixins:[yn({})],components:{BlogC:ne},data:function(){return{page:1,limit:10,isBottom:!1}},methods:{fetchData:function(){var n=this;return Object(wn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qn(n.$route.params.id,n.page,n.limit);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},reloadData:function(){var n=this;return Object(wn["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.data.rows){t.next=2;break}return t.abrupt("return");case 2:return n.page++,n.isLoading=!0,t.next=6,n.fetchData();case 6:e=t.sent,n.data.total=e.total,n.data.rows=n.data.rows.concat(e.rows),n.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},handleSubmit:function(n){var t=this;return Object(wn["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Un({blogid:t.$route.params.id,nickname:n.info.nickname,content:n.info.message});case 2:s=e.sent,t.data.rows.unshift(s),t.data.total++,n.callback("评论成功");case 6:case"end":return e.stop()}}),e)})))()},loadData:function(n){var t=n.target;t.scrollHeight-t.scrollTop-t.offsetHeight<200&&!1===this.isLoading&&this.data.rows.length<this.data.total&&(this.isBottom=!0,this.reloadData())}},mounted:function(){this.bus.$on("mainScroll",this.loadData)}},ee=te,se=(e("def0"),Object(p["a"])(ee,St,qt,!1,null,"7c46edda",null)),ae=se.exports,ie=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"blogToc-container"},[e("h2",[n._v("文章概要")]),e("List",{attrs:{list:n.selectItems},on:{select:n.selectHandle}})],1)},ce=[],oe=(e("18a5"),function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,e="";return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];clearTimeout(e),e=setTimeout((function(){n.apply(void 0,a)}),t)}}),re={name:"BlogToc",components:{List:dt},props:{items:{type:Array}},data:function(){return{isActive:"",flg:!0}},computed:{titleDom:function(){var n=[],t=function t(e){for(var s in e)n.push({name:e[s].name,anchor:e[s].anchor}),e[s].children&&t(e[s].children)};return t(this.items),n},selectItems:function(){var n=this,t=function t(e){if(e)return e.map((function(e){return Object(g["a"])(Object(g["a"])({},e),{},{isSelect:e.anchor===n.isActive,children:t(e.children)})}))};return t(this.items)}},methods:{selectHandle:function(n){window.location.hash=n.anchor},show:function(){this.isActive="",window.location.hash="";for(var n=0,t=0;t<this.titleDom.length;t++)if(document.getElementById(this.titleDom[t].anchor)){var e=document.getElementById(this.titleDom[t].anchor).getBoundingClientRect();n=e.y;var s=e.height;if(n>-s){this.isActive=this.titleDom[t].anchor;break}t===this.titleDom.length-1&&""===this.isActive&&(this.isActive=this.titleDom[t].anchor)}}},created:function(){this.DebouShow=oe(this.show,100),this.bus.$on("mainScroll",this.DebouShow)},updated:function(){""===this.isActive&&this.flg&&(this.isActive=this.titleDom[0].anchor,this.flg=!1)},destroyed:function(){this.bus.$off("mainScroll",this.DebouShow)}},le=re,pe=(e("14cd"),Object(p["a"])(le,ie,ce,!1,null,"ebc7bfd2",null)),ue=pe.exports,de={name:"index",components:{Layout:d,Detail:Nt,Comment:ae,Toc:ue,GoTop:Bn},computed:Object(P["b"])("Details",["isLoading","data"]),methods:{maintop:function(n){this.bus.$emit("mainScroll",n)}},mounted:function(){this.$refs.mainbox.addEventListener("scroll",this.maintop)},created:function(){this.$store.dispatch("Details/asyncData",this.$route.params.id)},updated:function(){var n=location.hash;location.hash="",setTimeout((function(){location.hash=n}),100)},beforeDestroy:function(){this.$refs.mainbox.removeEventListener("scroll",this.maintop)}},me=de,he=(e("1104"),Object(p["a"])(me,Ot,Et,!1,null,"60b8d786",null)),ge=he.exports,fe=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{ref:"mainScroll",staticClass:"message-container"},[e("div",{staticClass:"message"},[e("h1",[n._v("留言区")]),e("BlogComment",{directives:[{name:"loading",rawName:"v-loading",value:n.isLoading,expression:"isLoading"}],attrs:{list:n.data},on:{submit:n.handleSubmit}})],1),e("GotoTop")],1)},ve=[],be={name:"index",components:{BlogComment:ne,GotoTop:Bn},computed:Object(g["a"])({},Object(P["b"])("Message",["isLoading","data"])),data:function(){return{page:1,limit:10}},methods:{handleSubmit:function(n){this.$store.dispatch("Message/postMessage",n)},reloadData:function(){this.$store.dispatch("Message/getMessage",{page:this.page+1})},maintop:function(n){this.bus.$emit("BlogList",n);var t=n.target;t.scrollHeight-t.scrollTop-t.offsetHeight<200&&!1===this.isLoading&&this.data.rows.length<this.data.total&&(this.isBottom=!0,this.reloadData())}},created:function(){this.$store.dispatch("Message/getMessage",{page:this.page,limit:this.limit})},mounted:function(){this.debounceEvent=oe(this.maintop,100),this.$refs.mainScroll.addEventListener("scroll",this.debounceEvent)},beforeDestroy:function(){this.$refs.mainScroll.removeEventListener("scroll",this.debounceEvent)}},Ce=be,we=(e("09c0"),Object(p["a"])(Ce,fe,ve,!1,null,"61442174",null)),ye=we.exports,xe=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("h1",[n._v("工程项目")])},Le=[],_e={name:"index"},ke=_e,je=Object(p["a"])(ke,xe,Le,!1,null,"d8c677e2",null),Oe=je.exports,Ee=[{name:"Home",path:"/myblog",component:gn,meta:{name:"首页"}},{name:"Blog",path:"/article",component:wt,meta:{name:"博客Blog"}},{name:"CateBlog",path:"/article/cate/:categoryId",component:wt,meta:{name:"博分类情页"}},{name:"Detail",path:"/article/blog/:id",component:ge,meta:{name:"博客详情页"}},{name:"About",path:"/About",component:jt,meta:{name:"关于我们"}},{name:"Message",path:"/Message",component:ye,meta:{name:"你来留言吧"}},{name:"Project",path:"/Project",component:Oe,meta:{name:"项目工程"}}],Ae=localStorage.getItem("title")?localStorage.getItem("title"):"";function $e(n){n=n?n+"-":"",Be(n+Ae)}function Te(){""===Ae&&Be(Ae)}function De(n){n=n?n+"-":"",Be(n+Ae)}function Be(n){document.title=n}var Ne={storeSet:$e,routeSet:De,siteTitle:Te};s["a"].use(Q["a"]);var Se=new Q["a"]({routes:Ee,mode:"history"});Se.afterEach((function(n){Ne.routeSet(n.meta.name)}));var qe=Se,Re=e("96eb"),Me=e.n(Re);Me.a.mock("/api/banner","get",{code:0,msg:"",data:[{id:"1",midImg:"https://widewaystudio.github.io/myBlog/img/20201031141507.jpg",bigImg:"https://widewaystudio.github.io/myBlog/img/20201031141350.jpg",title:"凛冬将至",description:"人唯有恐惧的时候方能勇敢"},{id:"2",midImg:"https://widewaystudio.github.io/myBlog/img/20201031205550.jpg",bigImg:"https://widewaystudio.github.io/myBlog/img/20201031205551.jpg",title:"血火同源",description:"如果我回头了，一切都完了"},{id:"3",midImg:"https://widewaystudio.github.io/myBlog/img/20201031204401.jpg",bigImg:"https://widewaystudio.github.io/myBlog/img/20201031204403.jpg",title:"听我怒吼",description:"兰尼斯特有债必偿"}]});var He=e("ade3"),Ie=e("b383"),Pe=e.n(Ie);Me.a.mock("/api/blogtype","get",{code:0,msg:"","data|1-20":[{"id|+1":1,name:"分类@id","articleCount|0-300":0,"order|+1":1}]}),Me.a.mock(/^\/api\/blog(\?.+)?$/,"get",(function(n){var t=Pe.a.parse(n.url);return Me.a.mock({code:0,msg:"",data:Object(He["a"])({"total|2000-3000":0},"rows|".concat(t.limit||10),[{id:"@guid",title:"@ctitle(10,20)",description:"@cparagraph(1,10)",category:{"id|1-10":0,name:"分类@id"},"scanNumber|0-3000":0,"commentNumber|0-300":0,thumb:["@image(700x400, @color, #FFF, MockjsMode)"],createDate:"@date('T')"}])})})),Me.a.mock(/^\/api\/blog\/[^/]+$/,"get",{code:0,msg:"",data:{id:"@guid",title:"@ctitle(10,20)",category:{"id|1-10":0,name:"分类@id"},description:"@cparagraph(3,5)","scanNumber|0-10000":0,"commentNumber|0-100":0,createDate:"@date('T')",toc:[{name:"概述",anchor:"user-content-概述"},{name:"简单请求",anchor:"user-content-简单请求",children:[{name:"简单请求的判定",anchor:"user-content-简单请求的判定"},{name:"简单请求的交互规范",anchor:"user-content-简单请求的交互规范"}]},{name:"需要预检的请求",anchor:"user-content-需要预检的请求"},{name:"附带身份凭证的请求",anchor:"user-content-附带身份凭证的请求"},{name:"一个额外的补充",anchor:"user-content-一个额外的补充"}],"thumb|1":["@image(250x300,'#584329','#632322','Mockcjs')",null],htmlContent:'<h1>\n<a id="user-content-概述" class="anchor" href="#%E6%A6%82%E8%BF%B0"></a>概述</h1>\n<p><code>CORS</code>是基于<code>http1.1</code>的一种跨域解决方案，它的全称是<strong>C</strong>ross-<strong>O</strong>rigin <strong>R</strong>esource <strong>S</strong>haring，跨域资源共享。</p>\n<p>它的总体思路是：<strong>如果浏览器要跨域访问服务器的资源，需要获得服务器的允许</strong></p>\n\n<p>而要知道，一个请求可以附带很多信息，从而会对服务器造成不同程度的影响</p>\n<p>比如有的请求只是获取一些新闻，有的请求会改动服务器的数据</p>\n<p>针对不同的请求，CORS 规定了三种不同的交互模式，分别是：</p>\n<ul>\n<li><strong>简单请求</strong></li>\n<li><strong>需要预检的请求</strong></li>\n<li><strong>附带身份凭证的请求</strong></li>\n</ul>\n<p>这三种模式从上到下层层递进，请求可以做的事越来越多，要求也越来越严格。</p>\n<p>下面分别说明三种请求模式的具体规范。</p>\n<h1>\n<a id="user-content-简单请求" class="anchor" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"></a>简单请求</h1>\n<p>当浏览器端运行了一段 ajax 代码（无论是使用 XMLHttpRequest 还是 fetch api），浏览器会首先判断它属于哪一种请求模式</p>\n<h2>\n<a id="user-content-简单请求的判定" class="anchor" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E5%88%A4%E5%AE%9A"></a>简单请求的判定</h2>\n<p>当请求<strong>同时满足</strong>以下条件时，浏览器会认为它是一个简单请求：</p>\n<ol>\n<li>\n<p><strong>请求方法属于下面的一种：</strong></p>\n<ul>\n<li>get</li>\n<li>post</li>\n<li>head</li>\n</ul>\n</li>\n<li>\n<p><strong>请求头仅包含安全的字段，常见的安全字段如下：</strong></p>\n<ul>\n<li><code>Accept</code></li>\n<li><code>Accept-Language</code></li>\n<li><code>Content-Language</code></li>\n<li><code>Content-Type</code></li>\n<li><code>DPR</code></li>\n<li><code>Downlink</code></li>\n<li><code>Save-Data</code></li>\n<li><code>Viewport-Width</code></li>\n<li><code>Width</code></li>\n</ul>\n</li>\n<li>\n<p><strong>请求头如果包含<code>Content-Type</code>，仅限下面的值之一：</strong></p>\n<ul>\n<li><code>text/plain</code></li>\n<li><code>multipart/form-data</code></li>\n<li><code>application/x-www-form-urlencoded</code></li>\n</ul>\n</li>\n</ol>\n<p>如果以上三个条件同时满足，浏览器判定为简单请求。</p>\n<p>下面是一些例子：</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line"><span class="c1">// 简单请求</span></span>\n<span id="LC2" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">);</span></span>\n<span id="LC3" class="line"></span>\n<span id="LC4" class="line"><span class="c1">// 请求方法不满足要求，不是简单请求</span></span>\n<span id="LC5" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC6" class="line">  <span class="na">method</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">PUT</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC7" class="line"><span class="p">});</span></span>\n<span id="LC8" class="line"></span>\n<span id="LC9" class="line"><span class="c1">// 加入了额外的请求头，不是简单请求</span></span>\n<span id="LC10" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC11" class="line">  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span></span>\n<span id="LC12" class="line">    <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span></span>\n<span id="LC13" class="line">  <span class="p">},</span></span>\n<span id="LC14" class="line"><span class="p">});</span></span>\n<span id="LC15" class="line"></span>\n<span id="LC16" class="line"><span class="c1">// 简单请求</span></span>\n<span id="LC17" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC18" class="line">  <span class="na">method</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">post</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC19" class="line"><span class="p">});</span></span>\n<span id="LC20" class="line"></span>\n<span id="LC21" class="line"><span class="c1">// content-type不满足要求，不是简单请求</span></span>\n<span id="LC22" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC23" class="line">  <span class="na">method</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">post</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC24" class="line">  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span></span>\n<span id="LC25" class="line">    <span class="dl">\'</span><span class="s1">content-type</span><span class="dl">\'</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">application/json</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC26" class="line">  <span class="p">},</span></span>\n<span id="LC27" class="line"><span class="p">});</span></span></pre></div></div>\n<h2>\n<a id="user-content-简单请求的交互规范" class="anchor" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BA%A4%E4%BA%92%E8%A7%84%E8%8C%83"></a>简单请求的交互规范</h2>\n<p>当浏览器判定某个<strong>ajax 跨域请求</strong>是<strong>简单请求</strong>时，会发生以下的事情</p>\n<ol>\n<li><strong>请求头中会自动添加<code>Origin</code>字段</strong></li>\n</ol>\n<p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line"><span class="c1">// 简单请求</span></span>\n<span id="LC2" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/news</span><span class="dl">\'</span><span class="p">);</span></span></pre></div></div>\n<p>请求发出后，请求头会是下面的格式：</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">GET /api/news/ HTTP/1.1</span>\n<span id="LC2" class="line">Host: crossdomain.com</span>\n<span id="LC3" class="line">Connection: keep-alive</span>\n<span id="LC4" class="line">...</span>\n<span id="LC5" class="line">Referer: http://my.com/index.html</span>\n<span id="LC6" class="line">Origin: http://my.com</span></pre></div></div>\n<p>看到最后一行没，<code>Origin</code>字段会告诉服务器，是哪个源地址在跨域请求</p>\n<ol start="2">\n<li><strong>服务器响应头中应包含<code>Access-Control-Allow-Origin</code></strong></li>\n</ol>\n<p>当服务器收到请求后，如果允许该请求跨域访问，需要在响应头中添加<code>Access-Control-Allow-Origin</code>字段</p>\n<p>该字段的值可以是：</p>\n<ul>\n<li>*：表示我很开放，什么人我都允许访问</li>\n<li>具体的源：比如<code>http://my.com</code>，表示我就允许你访问</li>\n</ul>\n<blockquote>\n<p>实际上，这两个值对于客户端<code>http://my.com</code>而言，都一样，因为客户端才不会管其他源服务器允不允许，就关心自己是否被允许</p>\n<p>当然，服务器也可以维护一个可被允许的源列表，如果请求的<code>Origin</code>命中该列表，才响应<code>*</code>或具体的源</p>\n<p><strong>为了避免后续的麻烦，强烈推荐响应具体的源</strong></p>\n</blockquote>\n<p>假设服务器做出了以下的响应：</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">HTTP/1.1 200 OK</span>\n<span id="LC2" class="line">Date: Tue, 21 Apr 2020 08:03:35 GMT</span>\n<span id="LC3" class="line">...</span>\n<span id="LC4" class="line">Access-Control-Allow-Origin: http://my.com</span>\n<span id="LC5" class="line">...</span>\n<span id="LC6" class="line"></span>\n<span id="LC7" class="line">消息体中的数据</span></pre></div></div>\n<p>当浏览器看到服务器允许自己访问后，高兴的像一个两百斤的孩子，于是，它就把响应顺利的交给 js，以完成后续的操作</p>\n<p>下图简述了整个交互过程</p>\n\n<h1>\n<a id="user-content-需要预检的请求" class="anchor" href="#%E9%9C%80%E8%A6%81%E9%A2%84%E6%A3%80%E7%9A%84%E8%AF%B7%E6%B1%82"></a>需要预检的请求</h1>\n<p>简单的请求对服务器的威胁不大，所以允许使用上述的简单交互即可完成。</p>\n<p>但是，如果浏览器不认为这是一种简单请求，就会按照下面的流程进行：</p>\n<ol>\n<li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n<li><strong>服务器允许</strong></li>\n<li><strong>浏览器发送真实请求</strong></li>\n<li><strong>服务器完成真实的响应</strong></li>\n</ol>\n<p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line"><span class="c1">// 需要预检的请求</span></span>\n<span id="LC2" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="dl">\'</span><span class="s1">http://crossdomain.com/api/user</span><span class="dl">\'</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC3" class="line">  <span class="na">method</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">POST</span><span class="dl">\'</span><span class="p">,</span> <span class="c1">// post 请求</span></span>\n<span id="LC4" class="line">  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span></span>\n<span id="LC5" class="line">    <span class="c1">// 设置请求头</span></span>\n<span id="LC6" class="line">    <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span></span>\n<span id="LC7" class="line">    <span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span></span>\n<span id="LC8" class="line">    <span class="dl">\'</span><span class="s1">content-type</span><span class="dl">\'</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">application/json</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC9" class="line">  <span class="p">},</span></span>\n<span id="LC10" class="line">  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">袁小进</span><span class="dl">\'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">18</span> <span class="p">}),</span> <span class="c1">// 设置请求体</span></span>\n<span id="LC11" class="line"><span class="p">});</span></span></pre></div></div>\n<p>浏览器发现它不是一个简单请求，则会按照下面的流程与服务器交互</p>\n<ol>\n<li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n</ol>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">OPTIONS /api/user HTTP/1.1</span>\n<span id="LC2" class="line">Host: crossdomain.com</span>\n<span id="LC3" class="line">...</span>\n<span id="LC4" class="line">Origin: http://my.com</span>\n<span id="LC5" class="line">Access-Control-Request-Method: POST</span>\n<span id="LC6" class="line">Access-Control-Request-Headers: a, b, content-type</span></pre></div></div>\n<p>可以看出，这并非我们想要发出的真实请求，请求中不包含我们的请求头，也没有消息体。</p>\n<p>这是一个预检请求，它的目的是询问服务器，是否允许后续的真实请求。</p>\n<p>预检请求<strong>没有请求体</strong>，它包含了后续真实请求要做的事情</p>\n<p>预检请求有以下特征：</p>\n<ul>\n<li>请求方法为<code>OPTIONS</code>\n</li>\n<li>没有请求体</li>\n<li>请求头中包含\n<ul>\n<li>\n<code>Origin</code>：请求的源，和简单请求的含义一致</li>\n<li>\n<code>Access-Control-Request-Method</code>：后续的真实请求将使用的请求方法</li>\n<li>\n<code>Access-Control-Request-Headers</code>：后续的真实请求会改动的请求头</li>\n</ul>\n</li>\n</ul>\n<ol start="2">\n<li><strong>服务器允许</strong></li>\n</ol>\n<p>服务器收到预检请求后，可以检查预检请求中包含的信息，如果允许这样的请求，需要响应下面的消息格式</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">HTTP/1.1 200 OK</span>\n<span id="LC2" class="line">Date: Tue, 21 Apr 2020 08:03:35 GMT</span>\n<span id="LC3" class="line">...</span>\n<span id="LC4" class="line">Access-Control-Allow-Origin: http://my.com</span>\n<span id="LC5" class="line">Access-Control-Allow-Methods: POST</span>\n<span id="LC6" class="line">Access-Control-Allow-Headers: a, b, content-type</span>\n<span id="LC7" class="line">Access-Control-Max-Age: 86400</span>\n<span id="LC8" class="line">...</span></pre></div></div>\n<p>对于预检请求，不需要响应任何的消息体，只需要在响应头中添加：</p>\n<ul>\n<li>\n<code>Access-Control-Allow-Origin</code>：和简单请求一样，表示允许的源</li>\n<li>\n<code>Access-Control-Allow-Methods</code>：表示允许的后续真实的请求方法</li>\n<li>\n<code>Access-Control-Allow-Headers</code>：表示允许改动的请求头</li>\n<li>\n<code>Access-Control-Max-Age</code>：告诉浏览器，多少秒内，对于同样的请求源、方法、头，都不需要再发送预检请求了</li>\n</ul>\n<ol start="3">\n<li><strong>浏览器发送真实请求</strong></li>\n</ol>\n<p>预检被服务器允许后，浏览器就会发送真实请求了，上面的代码会发生下面的请求数据</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">POST /api/user HTTP/1.1</span>\n<span id="LC2" class="line">Host: crossdomain.com</span>\n<span id="LC3" class="line">Connection: keep-alive</span>\n<span id="LC4" class="line">...</span>\n<span id="LC5" class="line">Referer: http://my.com/index.html</span>\n<span id="LC6" class="line">Origin: http://my.com</span>\n<span id="LC7" class="line"></span>\n<span id="LC8" class="line">{"name": "袁小进", "age": 18 }</span></pre></div></div>\n<ol start="4">\n<li><strong>服务器响应真实请求</strong></li>\n</ol>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">HTTP/1.1 200 OK</span>\n<span id="LC2" class="line">Date: Tue, 21 Apr 2020 08:03:35 GMT</span>\n<span id="LC3" class="line">...</span>\n<span id="LC4" class="line">Access-Control-Allow-Origin: http://my.com</span>\n<span id="LC5" class="line">...</span>\n<span id="LC6" class="line"></span>\n<span id="LC7" class="line">添加用户成功</span></pre></div></div>\n<p>可以看出，当完成预检之后，后续的处理与简单请求相同</p>\n<p>下图简述了整个交互过程</p>\n<h1>\n<a id="user-content-附带身份凭证的请求" class="anchor" href="#%E9%99%84%E5%B8%A6%E8%BA%AB%E4%BB%BD%E5%87%AD%E8%AF%81%E7%9A%84%E8%AF%B7%E6%B1%82"></a>附带身份凭证的请求</h1>\n<p>默认情况下，ajax 的跨域请求并不会附带 cookie，这样一来，某些需要权限的操作就无法进行</p>\n<p>不过可以通过简单的配置就可以实现附带 cookie</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line"><span class="c1">// xhr</span></span>\n<span id="LC2" class="line"><span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span></span>\n<span id="LC3" class="line"><span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></span>\n<span id="LC4" class="line"></span>\n<span id="LC5" class="line"><span class="c1">// fetch api</span></span>\n<span id="LC6" class="line"><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span></span>\n<span id="LC7" class="line">  <span class="na">credentials</span><span class="p">:</span> <span class="dl">\'</span><span class="s1">include</span><span class="dl">\'</span><span class="p">,</span></span>\n<span id="LC8" class="line"><span class="p">});</span></span></pre></div></div>\n<p>这样一来，该跨域的 ajax 请求就是一个<em>附带身份凭证的请求</em></p>\n<p>当一个请求需要附带 cookie 时，无论它是简单请求，还是预检请求，都会在请求头中添加<code>cookie</code>字段</p>\n<p>而服务器响应时，需要明确告知客户端：服务器允许这样的凭据</p>\n<p>告知的方式也非常的简单，只需要在响应头中添加：<code>Access-Control-Allow-Credentials: true</code>即可</p>\n<p>对于一个附带身份凭证的请求，若服务器没有明确告知，浏览器仍然视为跨域被拒绝。</p>\n<p>另外要特别注意的是：<strong>对于附带身份凭证的请求，服务器不得设置 <code>Access-Control-Allow-Origin 的值为*</code></strong>。这就是为什么不推荐使用*的原因</p>\n<h1>\n<a id="user-content-一个额外的补充" class="anchor" href="#%E4%B8%80%E4%B8%AA%E9%A2%9D%E5%A4%96%E7%9A%84%E8%A1%A5%E5%85%85"></a>一个额外的补充</h1>\n<p>在跨域访问时，JS 只能拿到一些最基本的响应头，如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma，如果要访问其他头，则需要服务器设置本响应头。</p>\n<p><code>Access-Control-Expose-Headers</code>头让服务器把允许浏览器访问的头放入白名单，例如：</p>\n<div class="white"><div class="highlight"><pre><span id="LC1" class="line">Access-Control-Expose-Headers: authorization, a, b</span></pre></div></div>\n<p>这样 JS 就能够访问指定的响应头了。</p>'}}),Me.a.mock("/api/comment","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1,10)",createDate:Date.now(),"avatar|1":["http://img2.woyaogexing.com/2021/04/30/f559055ca1434dc0b8e08b602d031bf2%21400x400.jpeg","https://p.qqan.com/up/2020-10/16038655617357481.jpg","https://p.qqan.com/up/2020-10/16038655612991102.jpg","https://p.qqan.com/up/2020-10/16038655845134809.jpg","https://p.qqan.com/up/2020-10/16038656513174848.jpg"]}}),Me.a.mock(/^\/api\/comment\/?(\?.+)?$/,"get",(function(n){var t=Pe.a.parse(n.url);return Me.a.mock({code:0,msg:"",data:Object(He["a"])({total:52},"rows|".concat(t.limit||10),[{id:"@guid",nickname:"@cname",content:"@cparagraph(1,10)",createDate:Date.now(),"avatar|1":["http://img2.woyaogexing.com/2021/04/30/f559055ca1434dc0b8e08b602d031bf2%21400x400.jpeg","https://p.qqan.com/up/2020-10/16038655617357481.jpg","https://p.qqan.com/up/2020-10/16038655612991102.jpg","https://p.qqan.com/up/2020-10/16038655845134809.jpg","https://p.qqan.com/up/2020-10/16038656513174848.jpg"]}])})})),Me.a.mock("/api/setting","get",{code:0,msg:"",data:{avatar:"https://img.zcool.cn/community/01c3d55e7713a8a80120a89510edcc.jpg@1280w_1l_2o_100sh.jpg",siteTile:"程序猿的小窝",github:"https://github.com/DuYi-Edu",qq:"343807393",qqQ:"http://pic.qcsdn.com/img/20190527/a451fc18b13bd77825cec3c23c985a18.png-zhu",weixin:"yh77bao",mail:"349807393@qq.com",icp:"津2019024544",gitHubName:"wideway",favicon:"https://github.com/wideway"}}),Me.a.mock("/api/message","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1,10)",createDate:Date.now(),"avatar|1":["http://img2.woyaogexing.com/2021/04/30/f559055ca1434dc0b8e08b602d031bf2%21400x400.jpeg","https://p.qqan.com/up/2020-10/16038655617357481.jpg","https://p.qqan.com/up/2020-10/16038655612991102.jpg","https://p.qqan.com/up/2020-10/16038655845134809.jpg","https://p.qqan.com/up/2020-10/16038656513174848.jpg"]}}),Me.a.mock(/^\/api\/message\/?(\?.+)?$/,"get",(function(n){var t=Pe.a.parse(n.url);return Me.a.mock({code:0,msg:"",data:Object(He["a"])({total:52},"rows|".concat(t.limit||10),[{id:"@guid",nickname:"@cname",content:"@cparagraph(1,10)",createDate:Date.now(),"avatar|1":["https://p.qqan.com/up/2020-10/16038655617357481.jpg","https://p.qqan.com/up/2020-10/16038655612991102.jpg","https://p.qqan.com/up/2020-10/16038655845134809.jpg","https://p.qqan.com/up/2020-10/16038656513174848.jpg"]}])})})),Me.a.setup({timeout:"1000-2000"});var ze=e("5ef0"),We=e.n(ze),Ge=e("0669"),Fe=e.n(Ge);function Ye(n){return n.querySelector("img[data-role=loading]")}function Je(){var n=document.createElement("img");return n.src=Fe.a,n.className=We.a["Img-container"],n.dataset.role="loading",n}var Ue=function(n,t){var e=Ye(n);if(!0===t.value){if(!e){var s=Je();"static"===window.getComputedStyle(n).position&&(n.style.position="relative"),n.appendChild(s)}}else e&&e.remove()},Ke=e("b85c"),Qe=(e("4de4"),new s["a"]({})),Xe=[];function Ve(n,t){var e=document.documentElement.clientHeight,s=n.getBoundingClientRect();if(s.top>-s.height&&s.top<e){var a=document.createElement("img");return a.onload=function(){n.src=t},a.src=t,n.src=Fe.a,!1}return!0}function Ze(){var n,t=Object(Ke["a"])(Xe);try{var e=function(){var t=n.value,e=Ve(t.dom,t.src);e||(Xe=Xe.filter((function(n){return n.dom!==t.dom})))};for(t.s();!(n=t.n()).done;)e()}catch(s){t.e(s)}finally{t.f()}}var ns=oe(Ze,100);Qe.$on("BlogList",ns);var ts={inserted:function(n,t){var e=Ve(n,t.value);e&&Xe.push({dom:n,src:t.value})},unbind:function(n){Xe=Xe.filter((function(t){return t.dom===n}))}};function es(){return ss.apply(this,arguments)}function ss(){return ss=Object(wn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Pn.get("/api/setting");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),ss.apply(this,arguments)}var as=es,is={namespaced:!0,state:{isLoading:!1,data:[]},mutations:{setloading:function(n,t){n.isLoading=t},setData:function(n,t){n.data=t}},actions:{asyncsetData:function(n){return Object(wn["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,as();case 2:e=t.sent,0===n.state.data.length&&(n.commit("setloading",!0),n.commit("setData",e),localStorage.setItem("title",e.siteTile),Ne.siteTitle(e.siteTile),n.commit("setloading",!1));case 4:case"end":return t.stop()}}),t)})))()}}};function cs(){return os.apply(this,arguments)}function os(){return os=Object(wn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Pn.get("/api/banner");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),os.apply(this,arguments)}var rs=cs,ls={namespaced:!0,state:{isLoading:!1,data:[]},mutations:{setLoading:function(n,t){n.isLoading=t},setData:function(n,t){n.data=t}},actions:{Setdata:function(n){return Object(wn["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==n.state.data.length){t.next=7;break}return n.commit("setLoading",!0),t.next=4,rs();case 4:e=t.sent,n.commit("setData",e),n.commit("setLoading",!1);case 7:case"end":return t.stop()}}),t)})))()}}},ps={namespaced:!0,state:{isLoading:!1,data:[]},mutations:{setLoading:function(n,t){n.isLoading=t},setData:function(n,t){n.data=t}},actions:{asyncData:function(n,t){return Object(wn["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.state.data.id===t){e.next=9;break}return n.commit("setLoading",!0),e.next=4,Yn(t);case 4:s=e.sent,console.log(Object.prototype.toString.call(s)),Ne.storeSet(s.title),n.commit("setData",s),n.commit("setLoading",!1);case 9:n.state.data.id&&Ne.storeSet(n.state.data.title);case 10:case"end":return e.stop()}}),e)})))()}}};function us(){return ds.apply(this,arguments)}function ds(){return ds=Object(wn["a"])(regeneratorRuntime.mark((function n(){var t,e,s=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,e=s.length>1&&void 0!==s[1]?s[1]:10,n.next=4,Pn.get("/api/message",{params:{page:t,limit:e}});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)}))),ds.apply(this,arguments)}function ms(n){return hs.apply(this,arguments)}function hs(){return hs=Object(wn["a"])(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Pn.post("/api/message",t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),hs.apply(this,arguments)}var gs={namespaced:!0,state:{isLoading:!1,data:{}},getters:{rows:function(n){return n.data.rows}},mutations:{setLoading:function(n,t){n.isLoading=t},setData:function(n,t){n.data=t},setDataTotal:function(n,t){n.data.total=t},setDataRows:function(n,t){n.data.rows=t}},actions:{getMessage:function(n,t){return Object(wn["a"])(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.state.data,s.rows){e.next=10;break}return n.commit("setLoading",!0),e.next=5,us(t.page,t.limit);case 5:a=e.sent,n.commit("setData",a),n.commit("setLoading",!1),e.next=17;break;case 10:if(!(s.rows.length<s.total)){e.next=17;break}return n.commit("setLoading",!0),e.next=14,us(t.page,t.limit);case 14:i=e.sent,n.commit("setData",{total:i.total,rows:s.rows.concat(i.rows)}),n.commit("setLoading",!1);case 17:case"end":return e.stop()}}),e)})))()},postMessage:function(n,t){return Object(wn["a"])(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.commit("setLoading",!0),s=+n.state.data.total,a=n.state.data.rows,e.next=5,ms(t.info);case 5:i=e.sent,n.commit("setData",{total:++s,rows:a.concat([i])}),n.commit("setLoading",!1),t.callback("评论成功");case 9:case"end":return e.stop()}}),e)})))()}}};s["a"].use(P["a"]);var fs=new P["a"].Store({modules:{Globel:is,Banner:ls,Details:ps,Message:gs},strict:!0}),vs=fs;s["a"].prototype.bus=Qe,s["a"].prototype.showMessage=Hn,s["a"].directive("lazy",ts),s["a"].directive("loading",Ue),new s["a"]({store:vs,router:qe,render:function(n){return n(K)}}).$mount("#app")},"57e6":function(n,t,e){"use strict";e("5f77")},5819:function(n,t,e){},"5a0e":function(n,t,e){},"5a1d":function(n,t,e){},"5ef0":function(n,t,e){n.exports={"Img-container":"loading-module_Img-container_3_S9Q"}},"5f77":function(n,t,e){},"634b":function(n,t,e){},"70aa":function(n,t,e){},"76a4":function(n,t,e){},"81e0":function(n,t,e){"use strict";e("fa2a")},8377:function(n,t,e){},"845e":function(n,t,e){"use strict";e("b3b6")},"85c7":function(n,t,e){},8896:function(n,t,e){},"98c1":function(n,t,e){"use strict";e("70aa")},"996b":function(n,t,e){n.exports={message:"message-module_message_TCg1N","message-info":"message-module_message-info_2q4Mc","message-success":"message-module_message-success_2smoe","message-error":"message-module_message-error_23LSG","message-warn":"message-module_message-warn_1BCPZ"}},a208:function(n,t,e){},a74d:function(n,t,e){"use strict";e("76a4")},ae98:function(n,t,e){},afda:function(n,t,e){},b3b6:function(n,t,e){},b920:function(n,t,e){},bc56:function(n,t,e){},c522:function(n,t,e){"use strict";e("5a0e")},d2d9:function(n,t,e){"use strict";e("ae98")},db49:function(n,t,e){"use strict";e("bc56")},def0:function(n,t,e){"use strict";e("f67c")},e269:function(n,t,e){},e996:function(n,t,e){},ec55:function(n,t,e){"use strict";e("634b")},f67c:function(n,t,e){},f8a7:function(n,t,e){},fa2a:function(n,t,e){},fe64:function(n,t,e){"use strict";e("5a1d")}});
//# sourceMappingURL=app.5682c410.js.map